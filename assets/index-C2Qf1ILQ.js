(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const ye={data:{listings:[],users:[],services:[]},async init(){await Promise.all([this.fetchData("listings"),this.fetchData("users"),this.fetchData("services")]),console.log("Store initialized:",this.data)},async fetchData(e){try{const t=await fetch(`/data/${e}.json`);if(!t.ok)throw new Error(`Failed to fetch ${e}`);return this.data[e]=await t.json(),this.data[e]}catch(t){return console.error(t),[]}},getListing(e){return this.data.listings.find(t=>t.id===e)},getUser(e){return this.data.users.find(t=>t.id===e)}},G={};let Te=null;const K={addRoute(e,t){G[e]=t},navigate(e){if(Te===e)return;const t=G[e]||G["/404"]||(()=>"<h1>404 Not Found</h1>");Te=e;const r=document.querySelector("#app");r.innerHTML=t(),window.history.pushState({},e,window.location.origin+e),window.dispatchEvent(new CustomEvent("route-changed",{detail:{path:e}}))},init(){window.onpopstate=()=>{const e=window.location.pathname;this.navigate(e)},this.resolve()},resolve(){const e=window.location.pathname,t=G[e]||G["/"]||(()=>"<h1>404</h1>");document.querySelector("#app").innerHTML=t()}};var Ue={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Ae={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Mt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ee={CSS:{},springs:{}};function P(e,t,r){return Math.min(Math.max(e,t),r)}function Z(e,t){return e.indexOf(t)>-1}function ue(e,t){return e.apply(null,t)}var v={arr:function(e){return Array.isArray(e)},obj:function(e){return Z(Object.prototype.toString.call(e),"Object")},pth:function(e){return v.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||v.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return v.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return v.hex(e)||v.rgb(e)||v.hsl(e)},key:function(e){return!Ue.hasOwnProperty(e)&&!Ae.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Qe(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function Je(e,t){var r=Qe(e),i=P(v.und(r[0])?1:r[0],.1,100),n=P(v.und(r[1])?100:r[1],.1,100),s=P(v.und(r[2])?10:r[2],.1,100),u=P(v.und(r[3])?0:r[3],.1,100),o=Math.sqrt(n/i),a=s/(2*Math.sqrt(n*i)),l=a<1?o*Math.sqrt(1-a*a):0,c=1,f=a<1?(a*o+-u)/l:-u+o;function h(d){var g=t?t*d/1e3:d;return a<1?g=Math.exp(-g*a*o)*(c*Math.cos(l*g)+f*Math.sin(l*g)):g=(c+f*g)*Math.exp(-g*o),d===0||d===1?d:1-g}function A(){var d=ee.springs[e];if(d)return d;for(var g=1/6,M=0,E=0;;)if(M+=g,h(M)===1){if(E++,E>=16)break}else E=0;var p=M*g*1e3;return ee.springs[e]=p,p}return t?h:A}function Et(e){return e===void 0&&(e=10),function(t){return Math.ceil(P(t,1e-6,1)*e)*(1/e)}}var Ct=function(){var e=11,t=1/(e-1);function r(c,f){return 1-3*f+3*c}function i(c,f){return 3*f-6*c}function n(c){return 3*c}function s(c,f,h){return((r(f,h)*c+i(f,h))*c+n(f))*c}function u(c,f,h){return 3*r(f,h)*c*c+2*i(f,h)*c+n(f)}function o(c,f,h,A,d){var g,M,E=0;do M=f+(h-f)/2,g=s(M,A,d)-c,g>0?h=M:f=M;while(Math.abs(g)>1e-7&&++E<10);return M}function a(c,f,h,A){for(var d=0;d<4;++d){var g=u(f,h,A);if(g===0)return f;var M=s(f,h,A)-c;f-=M/g}return f}function l(c,f,h,A){if(!(0<=c&&c<=1&&0<=h&&h<=1))return;var d=new Float32Array(e);if(c!==f||h!==A)for(var g=0;g<e;++g)d[g]=s(g*t,c,h);function M(E){for(var p=0,m=1,C=e-1;m!==C&&d[m]<=E;++m)p+=t;--m;var T=(E-d[m])/(d[m+1]-d[m]),w=p+T*t,D=u(w,c,h);return D>=.001?a(E,w,c,h):D===0?w:o(E,p,p+t,c,h)}return function(E){return c===f&&h===A||E===0||E===1?E:s(M(E),f,A)}}return l}(),Ye=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Expo:function(){return function(i){return i?Math.pow(2,10*i-10):0}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=P(i,1,10),u=P(n,.1,2);return function(o){return o===0||o===1?o:-s*Math.pow(2,10*(o-1))*Math.sin((o-1-u/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/u)}}},r=["Quad","Cubic","Quart","Quint"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,u){return function(o){return 1-n(s,u)(1-o)}},e["easeInOut"+i]=function(s,u){return function(o){return o<.5?n(s,u)(o*2)/2:1-n(s,u)(o*-2+2)/2}},e["easeOutIn"+i]=function(s,u){return function(o){return o<.5?(1-n(s,u)(1-o*2))/2:(n(s,u)(o*2-1)+1)/2}}}),e}();function Me(e,t){if(v.fnc(e))return e;var r=e.split("(")[0],i=Ye[r],n=Qe(e);switch(r){case"spring":return Je(e,t);case"cubicBezier":return ue(Ct,n);case"steps":return ue(Et,n);default:return ue(i,n)}}function Ge(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function ne(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var u=e[s];t.call(i,u,s,e)&&n.push(u)}return n}function ie(e){return e.reduce(function(t,r){return t.concat(v.arr(r)?ie(r):r)},[])}function _e(e){return v.arr(e)?e:(v.str(e)&&(e=Ge(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Ee(e,t){return e.some(function(r){return r===t})}function Ce(e){var t={};for(var r in e)t[r]=e[r];return t}function le(e,t){var r=Ce(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function se(e,t){var r=Ce(e);for(var i in t)r[i]=v.und(e[i])?t[i]:e[i];return r}function wt(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function bt(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(o,a,l,c){return a+a+l+l+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),u=parseInt(i[3],16);return"rgba("+n+","+s+","+u+",1)"}function xt(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function u(h,A,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?h+(A-h)*6*d:d<1/2?A:d<2/3?h+(A-h)*(2/3-d)*6:h}var o,a,l;if(i==0)o=a=l=n;else{var c=n<.5?n*(1+i):n+i-n*i,f=2*n-c;o=u(f,c,r+1/3),a=u(f,c,r),l=u(f,c,r-1/3)}return"rgba("+o*255+","+a*255+","+l*255+","+s+")"}function Dt(e){if(v.rgb(e))return wt(e);if(v.hex(e))return bt(e);if(v.hsl(e))return xt(e)}function N(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Ft(e){if(Z(e,"translate")||e==="perspective")return"px";if(Z(e,"rotate")||Z(e,"skew"))return"deg"}function fe(e,t){return v.fnc(e)?e(t.target,t.id,t.total):e}function R(e,t){return e.getAttribute(t)}function we(e,t,r){var i=N(t);if(Ee([r,"deg","rad","turn"],i))return t;var n=ee.CSS[t+r];if(!v.und(n))return n;var s=100,u=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(u),u.style.position="absolute",u.style.width=s+r;var a=s/u.offsetWidth;o.removeChild(u);var l=a*parseFloat(t);return ee.CSS[t+r]=l,l}function Ze(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?we(e,n,r):n}}function be(e,t){if(v.dom(e)&&!v.inp(e)&&(!v.nil(R(e,t))||v.svg(e)&&e[t]))return"attribute";if(v.dom(e)&&Ee(Mt,t))return"transform";if(v.dom(e)&&t!=="transform"&&Ze(e,t))return"css";if(e[t]!=null)return"object"}function qe(e){if(v.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function Bt(e,t,r,i){var n=Z(t,"scale")?1:0+Ft(t),s=qe(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?we(e,s,i):s}function xe(e,t,r,i){switch(be(e,t)){case"transform":return Bt(e,t,i,r);case"css":return Ze(e,t,r);case"attribute":return R(e,t);default:return e[t]||0}}function De(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=N(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function Xe(e,t){if(v.col(e))return Dt(e);if(/\s/g.test(e))return e;var r=N(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function Fe(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function It(e){return Math.PI*2*R(e,"r")}function St(e){return R(e,"width")*2+R(e,"height")*2}function Lt(e){return Fe({x:R(e,"x1"),y:R(e,"y1")},{x:R(e,"x2"),y:R(e,"y2")})}function et(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=Fe(i,s)),i=s}return r}function kt(e){var t=e.points;return et(e)+Fe(t.getItem(t.numberOfItems-1),t.getItem(0))}function tt(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return It(e);case"rect":return St(e);case"line":return Lt(e);case"polyline":return et(e);case"polygon":return kt(e)}}function Ot(e){var t=tt(e);return e.setAttribute("stroke-dasharray",t),t}function Tt(e){for(var t=e.parentNode;v.svg(t)&&v.svg(t.parentNode);)t=t.parentNode;return t}function rt(e,t){var r=t||{},i=r.el||Tt(e),n=i.getBoundingClientRect(),s=R(i,"viewBox"),u=n.width,o=n.height,a=r.viewBox||(s?s.split(" "):[0,0,u,o]);return{el:i,viewBox:a,x:a[0]/1,y:a[1]/1,w:u,h:o,vW:a[2],vH:a[3]}}function _t(e,t){var r=v.str(e)?Ge(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:rt(r),totalLength:tt(r)*(i/100)}}}function Pt(e,t,r){function i(c){c===void 0&&(c=0);var f=t+c>=1?t+c:0;return e.el.getPointAtLength(f)}var n=rt(e.el,e.svg),s=i(),u=i(-1),o=i(1),a=r?1:n.w/n.vW,l=r?1:n.h/n.vH;switch(e.property){case"x":return(s.x-n.x)*a;case"y":return(s.y-n.y)*l;case"angle":return Math.atan2(o.y-u.y,o.x-u.x)*180/Math.PI}}function Pe(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=Xe(v.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:v.str(e)||t?i.split(r):[]}}function Be(e){var t=e?ie(v.arr(e)?e.map(_e):_e(e)):[];return ne(t,function(r,i,n){return n.indexOf(r)===i})}function nt(e){var t=Be(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:qe(r)}}})}function Rt(e,t){var r=Ce(t);if(/^spring/.test(r.easing)&&(r.duration=Je(r.easing)),v.arr(e)){var i=e.length,n=i===2&&!v.obj(e[0]);n?e={value:e}:v.fnc(t.duration)||(r.duration=t.duration/i)}var s=v.arr(e)?e:[e];return s.map(function(u,o){var a=v.obj(u)&&!v.pth(u)?u:{value:u};return v.und(a.delay)&&(a.delay=o?0:t.delay),v.und(a.endDelay)&&(a.endDelay=o===s.length-1?t.endDelay:0),a}).map(function(u){return se(u,r)})}function $t(e){for(var t=ne(ie(e.map(function(s){return Object.keys(s)})),function(s){return v.key(s)}).reduce(function(s,u){return s.indexOf(u)<0&&s.push(u),s},[]),r={},i=function(s){var u=t[s];r[u]=e.map(function(o){var a={};for(var l in o)v.key(l)?l==u&&(a.value=o[l]):a[l]=o[l];return a})},n=0;n<t.length;n++)i(n);return r}function Nt(e,t){var r=[],i=t.keyframes;i&&(t=se($t(i),t));for(var n in t)v.key(n)&&r.push({name:n,tweens:Rt(t[n],e)});return r}function jt(e,t){var r={};for(var i in e){var n=fe(e[i],t);v.arr(n)&&(n=n.map(function(s){return fe(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function Vt(e,t){var r;return e.tweens.map(function(i){var n=jt(i,t),s=n.value,u=v.arr(s)?s[1]:s,o=N(u),a=xe(t.target,e.name,o,t),l=r?r.to.original:a,c=v.arr(s)?s[0]:l,f=N(c)||N(a),h=o||f;return v.und(u)&&(u=l),n.from=Pe(c,h),n.to=Pe(De(u,c),h),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=Me(n.easing,n.duration),n.isPath=v.pth(s),n.isPathTargetInsideSVG=n.isPath&&v.svg(t.target),n.isColor=v.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var it={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(u,o){s+=o+"("+u+") "}),e.style.transform=s}}};function st(e,t){var r=nt(e);r.forEach(function(i){for(var n in t){var s=fe(t[n],i),u=i.target,o=N(s),a=xe(u,n,o,i),l=o||N(a),c=De(Xe(s,l),a),f=be(u,n);it[f](u,n,c,i.transforms,!0)}})}function zt(e,t){var r=be(e.target,t.name);if(r){var i=Vt(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function Wt(e,t){return ne(ie(e.map(function(r){return t.map(function(i){return zt(r,i)})})),function(r){return!v.und(r)})}function at(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){return i(s)+s.duration})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){return i(s)+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){return i(s)+s.duration-s.endDelay})):t.endDelay,n}var Re=0;function Ht(e){var t=le(Ue,e),r=le(Ae,e),i=Nt(r,e),n=nt(e.targets),s=Wt(n,i),u=at(s,r),o=Re;return Re++,se(t,{id:o,children:[],animatables:n,animations:s,duration:u.duration,delay:u.delay,endDelay:u.endDelay})}var O=[],ut=function(){var e;function t(){!e&&(!$e()||!b.suspendWhenDocumentHidden)&&O.length>0&&(e=requestAnimationFrame(r))}function r(n){for(var s=O.length,u=0;u<s;){var o=O[u];o.paused?(O.splice(u,1),s--):(o.tick(n),u++)}e=u>0?requestAnimationFrame(r):void 0}function i(){b.suspendWhenDocumentHidden&&($e()?e=cancelAnimationFrame(e):(O.forEach(function(n){return n._onDocumentVisibility()}),ut()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),t}();function $e(){return!!document&&document.hidden}function b(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s=0,u=null;function o(p){var m=window.Promise&&new Promise(function(C){return u=C});return p.finished=m,m}var a=Ht(e);o(a);function l(){var p=a.direction;p!=="alternate"&&(a.direction=p!=="normal"?"normal":"reverse"),a.reversed=!a.reversed,n.forEach(function(m){return m.reversed=a.reversed})}function c(p){return a.reversed?a.duration-p:p}function f(){t=0,r=c(a.currentTime)*(1/b.speed)}function h(p,m){m&&m.seek(p-m.timelineOffset)}function A(p){if(a.reversePlayback)for(var C=s;C--;)h(p,n[C]);else for(var m=0;m<s;m++)h(p,n[m])}function d(p){for(var m=0,C=a.animations,T=C.length;m<T;){var w=C[m],D=w.animatable,I=w.tweens,F=I.length-1,x=I[F];F&&(x=ne(I,function(At){return p<At.end})[0]||x);for(var _=P(p-x.start-x.delay,0,x.duration)/x.duration,k=isNaN(_)?1:x.easing(_),L=x.to.strings,B=x.round,V=[],q=x.to.numbers.length,H=void 0,Q=0;Q<q;Q++){var J=void 0,Se=x.to.numbers[Q],Le=x.from.numbers[Q]||0;x.isPath?J=Pt(x.value,k*Se,x.isPathTargetInsideSVG):J=Le+k*(Se-Le),B&&(x.isColor&&Q>2||(J=Math.round(J*B)/B)),V.push(J)}var ke=L.length;if(!ke)H=V[0];else{H=L[0];for(var Y=0;Y<ke;Y++){L[Y];var Oe=L[Y+1],ae=V[Y];isNaN(ae)||(Oe?H+=ae+Oe:H+=ae+" ")}}it[w.type](D.target,w.property,H,D.transforms),w.currentValue=H,m++}}function g(p){a[p]&&!a.passThrough&&a[p](a)}function M(){a.remaining&&a.remaining!==!0&&a.remaining--}function E(p){var m=a.duration,C=a.delay,T=m-a.endDelay,w=c(p);a.progress=P(w/m*100,0,100),a.reversePlayback=w<a.currentTime,n&&A(w),!a.began&&a.currentTime>0&&(a.began=!0,g("begin")),!a.loopBegan&&a.currentTime>0&&(a.loopBegan=!0,g("loopBegin")),w<=C&&a.currentTime!==0&&d(0),(w>=T&&a.currentTime!==m||!m)&&d(m),w>C&&w<T?(a.changeBegan||(a.changeBegan=!0,a.changeCompleted=!1,g("changeBegin")),g("change"),d(w)):a.changeBegan&&(a.changeCompleted=!0,a.changeBegan=!1,g("changeComplete")),a.currentTime=P(w,0,m),a.began&&g("update"),p>=m&&(r=0,M(),a.remaining?(t=i,g("loopComplete"),a.loopBegan=!1,a.direction==="alternate"&&l()):(a.paused=!0,a.completed||(a.completed=!0,g("loopComplete"),g("complete"),!a.passThrough&&"Promise"in window&&(u(),o(a)))))}return a.reset=function(){var p=a.direction;a.passThrough=!1,a.currentTime=0,a.progress=0,a.paused=!0,a.began=!1,a.loopBegan=!1,a.changeBegan=!1,a.completed=!1,a.changeCompleted=!1,a.reversePlayback=!1,a.reversed=p==="reverse",a.remaining=a.loop,n=a.children,s=n.length;for(var m=s;m--;)a.children[m].reset();(a.reversed&&a.loop!==!0||p==="alternate"&&a.loop===1)&&a.remaining++,d(a.reversed?a.duration:0)},a._onDocumentVisibility=f,a.set=function(p,m){return st(p,m),a},a.tick=function(p){i=p,t||(t=i),E((i+(r-t))*b.speed)},a.seek=function(p){E(c(p))},a.pause=function(){a.paused=!0,f()},a.play=function(){a.paused&&(a.completed&&a.reset(),a.paused=!1,O.push(a),f(),ut())},a.reverse=function(){l(),a.completed=!a.reversed,f()},a.restart=function(){a.reset(),a.play()},a.remove=function(p){var m=Be(p);ot(m,a)},a.reset(),a.autoplay&&a.play(),a}function Ne(e,t){for(var r=t.length;r--;)Ee(e,t[r].animatable.target)&&t.splice(r,1)}function ot(e,t){var r=t.animations,i=t.children;Ne(e,r);for(var n=i.length;n--;){var s=i[n],u=s.animations;Ne(e,u),!u.length&&!s.children.length&&i.splice(n,1)}!r.length&&!i.length&&t.pause()}function Kt(e){for(var t=Be(e),r=O.length;r--;){var i=O[r];ot(t,i)}}function Ut(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?Me(t.easing):null,n=t.grid,s=t.axis,u=t.from||0,o=u==="first",a=u==="center",l=u==="last",c=v.arr(e),f=parseFloat(c?e[0]:e),h=c?parseFloat(e[1]):0,A=N(c?e[1]:e)||0,d=t.start||0+(c?f:0),g=[],M=0;return function(E,p,m){if(o&&(u=0),a&&(u=(m-1)/2),l&&(u=m-1),!g.length){for(var C=0;C<m;C++){if(!n)g.push(Math.abs(u-C));else{var T=a?(n[0]-1)/2:u%n[0],w=a?(n[1]-1)/2:Math.floor(u/n[0]),D=C%n[0],I=Math.floor(C/n[0]),F=T-D,x=w-I,_=Math.sqrt(F*F+x*x);s==="x"&&(_=-F),s==="y"&&(_=-x),g.push(_)}M=Math.max.apply(Math,g)}i&&(g=g.map(function(L){return i(L/M)*M})),r==="reverse"&&(g=g.map(function(L){return s?L<0?L*-1:-L:Math.abs(M-L)}))}var k=c?(h-f)/M:f;return d+k*(Math.round(g[p]*100)/100)+A}}function Qt(e){e===void 0&&(e={});var t=b(e);return t.duration=0,t.add=function(r,i){var n=O.indexOf(t),s=t.children;n>-1&&O.splice(n,1);function u(h){h.passThrough=!0}for(var o=0;o<s.length;o++)u(s[o]);var a=se(r,le(Ae,e));a.targets=a.targets||e.targets;var l=t.duration;a.autoplay=!1,a.direction=t.direction,a.timelineOffset=v.und(i)?l:De(i,l),u(t),t.seek(a.timelineOffset);var c=b(a);u(c),s.push(c);var f=at(s,e);return t.delay=f.delay,t.endDelay=f.endDelay,t.duration=f.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}b.version="3.2.1";b.speed=1;b.suspendWhenDocumentHidden=!0;b.running=O;b.remove=Kt;b.get=xe;b.set=st;b.convertPx=we;b.path=_t;b.setDashoffset=Ot;b.stagger=Ut;b.timeline=Qt;b.easing=Me;b.penner=Ye;b.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const je={pageLoad(e){b({targets:e,translateY:[20,0],opacity:[0,1],easing:"spring(1, 80, 10, 0)",duration:800,delay:b.stagger(100)})},enter(e,t){b({targets:e,opacity:[0,1],duration:300,easing:"easeOutQuad",complete:t})}};function Jt(){return`
    <div class="view-home">
      <header class="hero">
        <h1>Welcome to Campus Nodes</h1>
        <p>The hyper-local student trading ecosystem.</p>
      </header>
      
      <div class="grid">
        <div class="card" onclick="window.router.navigate('/marketplace')">
          <h3>Marketplace</h3>
          <p>Buy, sell, and rent notes & gear.</p>
        </div>
        <div class="card" onclick="window.router.navigate('/services')">
          <h3>Services</h3>
          <p>Find project help or swap lockers.</p>
        </div>
      </div>
    </div>
  `}function j(e){return Array.isArray?Array.isArray(e):ft(e)==="[object Array]"}function Yt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Gt(e){return e==null?"":Yt(e)}function $(e){return typeof e=="string"}function ct(e){return typeof e=="number"}function Zt(e){return e===!0||e===!1||qt(e)&&ft(e)=="[object Boolean]"}function lt(e){return typeof e=="object"}function qt(e){return lt(e)&&e!==null}function S(e){return e!=null}function oe(e){return!e.trim().length}function ft(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Xt="Incorrect 'index' type",er=e=>`Invalid value for key ${e}`,tr=e=>`Pattern length exceeds max of ${e}.`,rr=e=>`Missing ${e} property in key`,nr=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ve=Object.prototype.hasOwnProperty;class ir{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(i=>{let n=ht(i);this._keys.push(n),this._keyMap[n.id]=n,r+=n.weight}),this._keys.forEach(i=>{i.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ht(e){let t=null,r=null,i=null,n=1,s=null;if($(e)||j(e))i=e,t=ze(e),r=he(e);else{if(!Ve.call(e,"name"))throw new Error(rr("name"));const u=e.name;if(i=u,Ve.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(nr(u));t=ze(u),r=he(u),s=e.getFn}return{path:t,id:r,weight:n,src:i,getFn:s}}function ze(e){return j(e)?e:e.split(".")}function he(e){return j(e)?e.join("."):e}function sr(e,t){let r=[],i=!1;const n=(s,u,o)=>{if(S(s))if(!u[o])r.push(s);else{let a=u[o];const l=s[a];if(!S(l))return;if(o===u.length-1&&($(l)||ct(l)||Zt(l)))r.push(Gt(l));else if(j(l)){i=!0;for(let c=0,f=l.length;c<f;c+=1)n(l[c],u,o+1)}else u.length&&n(l,u,o+1)}};return n(e,$(t)?t.split("."):t,0),i?r:r[0]}const ar={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ur={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},or={location:0,threshold:.6,distance:100},cr={useExtendedSearch:!1,getFn:sr,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var y={...ur,...ar,...or,...cr};const lr=/[^ ]+/g;function fr(e=1,t=3){const r=new Map,i=Math.pow(10,t);return{get(n){const s=n.match(lr).length;if(r.has(s))return r.get(s);const u=1/Math.pow(s,.5*e),o=parseFloat(Math.round(u*i)/i);return r.set(s,o),o},clear(){r.clear()}}}class Ie{constructor({getFn:t=y.getFn,fieldNormWeight:r=y.fieldNormWeight}={}){this.norm=fr(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,i)=>{this._keysMap[r.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,$(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();$(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,i=this.size();r<i;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!S(t)||oe(t))return;let i={v:t,i:r,n:this.norm.get(t)};this.records.push(i)}_addObject(t,r){let i={i:r,$:{}};this.keys.forEach((n,s)=>{let u=n.getFn?n.getFn(t):this.getFn(t,n.path);if(S(u)){if(j(u)){let o=[];const a=[{nestedArrIndex:-1,value:u}];for(;a.length;){const{nestedArrIndex:l,value:c}=a.pop();if(S(c))if($(c)&&!oe(c)){let f={v:c,i:l,n:this.norm.get(c)};o.push(f)}else j(c)&&c.forEach((f,h)=>{a.push({nestedArrIndex:h,value:f})})}i.$[s]=o}else if($(u)&&!oe(u)){let o={v:u,n:this.norm.get(u)};i.$[s]=o}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function dt(e,t,{getFn:r=y.getFn,fieldNormWeight:i=y.fieldNormWeight}={}){const n=new Ie({getFn:r,fieldNormWeight:i});return n.setKeys(e.map(ht)),n.setSources(t),n.create(),n}function hr(e,{getFn:t=y.getFn,fieldNormWeight:r=y.fieldNormWeight}={}){const{keys:i,records:n}=e,s=new Ie({getFn:t,fieldNormWeight:r});return s.setKeys(i),s.setIndexRecords(n),s}function X(e,{errors:t=0,currentLocation:r=0,expectedLocation:i=0,distance:n=y.distance,ignoreLocation:s=y.ignoreLocation}={}){const u=t/e.length;if(s)return u;const o=Math.abs(i-r);return n?u+o/n:o?1:u}function dr(e=[],t=y.minMatchCharLength){let r=[],i=-1,n=-1,s=0;for(let u=e.length;s<u;s+=1){let o=e[s];o&&i===-1?i=s:!o&&i!==-1&&(n=s-1,n-i+1>=t&&r.push([i,n]),i=-1)}return e[s-1]&&s-i>=t&&r.push([i,s-1]),r}const W=32;function gr(e,t,r,{location:i=y.location,distance:n=y.distance,threshold:s=y.threshold,findAllMatches:u=y.findAllMatches,minMatchCharLength:o=y.minMatchCharLength,includeMatches:a=y.includeMatches,ignoreLocation:l=y.ignoreLocation}={}){if(t.length>W)throw new Error(tr(W));const c=t.length,f=e.length,h=Math.max(0,Math.min(i,f));let A=s,d=h;const g=o>1||a,M=g?Array(f):[];let E;for(;(E=e.indexOf(t,d))>-1;){let D=X(t,{currentLocation:E,expectedLocation:h,distance:n,ignoreLocation:l});if(A=Math.min(D,A),d=E+c,g){let I=0;for(;I<c;)M[E+I]=1,I+=1}}d=-1;let p=[],m=1,C=c+f;const T=1<<c-1;for(let D=0;D<c;D+=1){let I=0,F=C;for(;I<F;)X(t,{errors:D,currentLocation:h+F,expectedLocation:h,distance:n,ignoreLocation:l})<=A?I=F:C=F,F=Math.floor((C-I)/2+I);C=F;let x=Math.max(1,h-F+1),_=u?f:Math.min(h+F,f)+c,k=Array(_+2);k[_+1]=(1<<D)-1;for(let B=_;B>=x;B-=1){let V=B-1,q=r[e.charAt(V)];if(g&&(M[V]=+!!q),k[B]=(k[B+1]<<1|1)&q,D&&(k[B]|=(p[B+1]|p[B])<<1|1|p[B+1]),k[B]&T&&(m=X(t,{errors:D,currentLocation:V,expectedLocation:h,distance:n,ignoreLocation:l}),m<=A)){if(A=m,d=V,d<=h)break;x=Math.max(1,2*h-d)}}if(X(t,{errors:D+1,currentLocation:h,expectedLocation:h,distance:n,ignoreLocation:l})>A)break;p=k}const w={isMatch:d>=0,score:Math.max(.001,m)};if(g){const D=dr(M,o);D.length?a&&(w.indices=D):w.isMatch=!1}return w}function vr(e){let t={};for(let r=0,i=e.length;r<i;r+=1){const n=e.charAt(r);t[n]=(t[n]||0)|1<<i-r-1}return t}const te=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class gt{constructor(t,{location:r=y.location,threshold:i=y.threshold,distance:n=y.distance,includeMatches:s=y.includeMatches,findAllMatches:u=y.findAllMatches,minMatchCharLength:o=y.minMatchCharLength,isCaseSensitive:a=y.isCaseSensitive,ignoreDiacritics:l=y.ignoreDiacritics,ignoreLocation:c=y.ignoreLocation}={}){if(this.options={location:r,threshold:i,distance:n,includeMatches:s,findAllMatches:u,minMatchCharLength:o,isCaseSensitive:a,ignoreDiacritics:l,ignoreLocation:c},t=a?t:t.toLowerCase(),t=l?te(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(A,d)=>{this.chunks.push({pattern:A,alphabet:vr(A),startIndex:d})},h=this.pattern.length;if(h>W){let A=0;const d=h%W,g=h-d;for(;A<g;)f(this.pattern.substr(A,W),A),A+=W;if(d){const M=h-W;f(this.pattern.substr(M),M)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,ignoreDiacritics:i,includeMatches:n}=this.options;if(t=r?t:t.toLowerCase(),t=i?te(t):t,this.pattern===t){let g={isMatch:!0,score:0};return n&&(g.indices=[[0,t.length-1]]),g}const{location:s,distance:u,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let f=[],h=0,A=!1;this.chunks.forEach(({pattern:g,alphabet:M,startIndex:E})=>{const{isMatch:p,score:m,indices:C}=gr(t,g,M,{location:s+E,distance:u,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});p&&(A=!0),h+=m,p&&C&&(f=[...f,...C])});let d={isMatch:A,score:A?h/this.chunks.length:1};return A&&n&&(d.indices=f),d}}class z{constructor(t){this.pattern=t}static isMultiMatch(t){return We(t,this.multiRegex)}static isSingleMatch(t){return We(t,this.singleRegex)}search(){}}function We(e,t){const r=e.match(t);return r?r[1]:null}class pr extends z{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class mr extends z{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const i=t.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,t.length-1]}}}class yr extends z{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Ar extends z{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Mr extends z{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Er extends z{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class vt extends z{constructor(t,{location:r=y.location,threshold:i=y.threshold,distance:n=y.distance,includeMatches:s=y.includeMatches,findAllMatches:u=y.findAllMatches,minMatchCharLength:o=y.minMatchCharLength,isCaseSensitive:a=y.isCaseSensitive,ignoreDiacritics:l=y.ignoreDiacritics,ignoreLocation:c=y.ignoreLocation}={}){super(t),this._bitapSearch=new gt(t,{location:r,threshold:i,distance:n,includeMatches:s,findAllMatches:u,minMatchCharLength:o,isCaseSensitive:a,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class pt extends z{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,i;const n=[],s=this.pattern.length;for(;(i=t.indexOf(this.pattern,r))>-1;)r=i+s,n.push([i,r-1]);const u=!!n.length;return{isMatch:u,score:u?0:1,indices:n}}}const de=[pr,pt,yr,Ar,Er,Mr,mr,vt],He=de.length,Cr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,wr="|";function br(e,t={}){return e.split(wr).map(r=>{let i=r.trim().split(Cr).filter(s=>s&&!!s.trim()),n=[];for(let s=0,u=i.length;s<u;s+=1){const o=i[s];let a=!1,l=-1;for(;!a&&++l<He;){const c=de[l];let f=c.isMultiMatch(o);f&&(n.push(new c(f,t)),a=!0)}if(!a)for(l=-1;++l<He;){const c=de[l];let f=c.isSingleMatch(o);if(f){n.push(new c(f,t));break}}}return n})}const xr=new Set([vt.type,pt.type]);class Dr{constructor(t,{isCaseSensitive:r=y.isCaseSensitive,ignoreDiacritics:i=y.ignoreDiacritics,includeMatches:n=y.includeMatches,minMatchCharLength:s=y.minMatchCharLength,ignoreLocation:u=y.ignoreLocation,findAllMatches:o=y.findAllMatches,location:a=y.location,threshold:l=y.threshold,distance:c=y.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:i,includeMatches:n,minMatchCharLength:s,findAllMatches:o,ignoreLocation:u,location:a,threshold:l,distance:c},t=r?t:t.toLowerCase(),t=i?te(t):t,this.pattern=t,this.query=br(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:n,ignoreDiacritics:s}=this.options;t=n?t:t.toLowerCase(),t=s?te(t):t;let u=0,o=[],a=0;for(let l=0,c=r.length;l<c;l+=1){const f=r[l];o.length=0,u=0;for(let h=0,A=f.length;h<A;h+=1){const d=f[h],{isMatch:g,indices:M,score:E}=d.search(t);if(g){if(u+=1,a+=E,i){const p=d.constructor.type;xr.has(p)?o=[...o,...M]:o.push(M)}}else{a=0,u=0,o.length=0;break}}if(u){let h={isMatch:!0,score:a/u};return i&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const ge=[];function Fr(...e){ge.push(...e)}function ve(e,t){for(let r=0,i=ge.length;r<i;r+=1){let n=ge[r];if(n.condition(e,t))return new n(e,t)}return new gt(e,t)}const re={AND:"$and",OR:"$or"},pe={PATH:"$path",PATTERN:"$val"},me=e=>!!(e[re.AND]||e[re.OR]),Br=e=>!!e[pe.PATH],Ir=e=>!j(e)&&lt(e)&&!me(e),Ke=e=>({[re.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function mt(e,t,{auto:r=!0}={}){const i=n=>{let s=Object.keys(n);const u=Br(n);if(!u&&s.length>1&&!me(n))return i(Ke(n));if(Ir(n)){const a=u?n[pe.PATH]:s[0],l=u?n[pe.PATTERN]:n[a];if(!$(l))throw new Error(er(a));const c={keyId:he(a),pattern:l};return r&&(c.searcher=ve(l,t)),c}let o={children:[],operator:s[0]};return s.forEach(a=>{const l=n[a];j(l)&&l.forEach(c=>{o.children.push(i(c))})}),o};return me(e)||(e=Ke(e)),i(e)}function Sr(e,{ignoreFieldNorm:t=y.ignoreFieldNorm}){e.forEach(r=>{let i=1;r.matches.forEach(({key:n,norm:s,score:u})=>{const o=n?n.weight:null;i*=Math.pow(u===0&&o?Number.EPSILON:u,(o||1)*(t?1:s))}),r.score=i})}function Lr(e,t){const r=e.matches;t.matches=[],S(r)&&r.forEach(i=>{if(!S(i.indices)||!i.indices.length)return;const{indices:n,value:s}=i;let u={indices:n,value:s};i.key&&(u.key=i.key.src),i.idx>-1&&(u.refIndex=i.idx),t.matches.push(u)})}function kr(e,t){t.score=e.score}function Or(e,t,{includeMatches:r=y.includeMatches,includeScore:i=y.includeScore}={}){const n=[];return r&&n.push(Lr),i&&n.push(kr),e.map(s=>{const{idx:u}=s,o={item:t[u],refIndex:u};return n.length&&n.forEach(a=>{a(s,o)}),o})}class U{constructor(t,r={},i){this.options={...y,...r},this.options.useExtendedSearch,this._keyStore=new ir(this.options.keys),this.setCollection(t,i)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Ie))throw new Error(Xt);this._myIndex=r||dt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){S(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let i=0,n=this._docs.length;i<n;i+=1){const s=this._docs[i];t(s,i)&&(this.removeAt(i),i-=1,n-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:i,includeScore:n,shouldSort:s,sortFn:u,ignoreFieldNorm:o}=this.options;let a=$(t)?$(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Sr(a,{ignoreFieldNorm:o}),s&&a.sort(u),ct(r)&&r>-1&&(a=a.slice(0,r)),Or(a,this._docs,{includeMatches:i,includeScore:n})}_searchStringList(t){const r=ve(t,this.options),{records:i}=this._myIndex,n=[];return i.forEach(({v:s,i:u,n:o})=>{if(!S(s))return;const{isMatch:a,score:l,indices:c}=r.searchIn(s);a&&n.push({item:s,idx:u,matches:[{score:l,value:s,norm:o,indices:c}]})}),n}_searchLogical(t){const r=mt(t,this.options),i=(o,a,l)=>{if(!o.children){const{keyId:f,searcher:h}=o,A=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:h});return A&&A.length?[{idx:l,item:a,matches:A}]:[]}const c=[];for(let f=0,h=o.children.length;f<h;f+=1){const A=o.children[f],d=i(A,a,l);if(d.length)c.push(...d);else if(o.operator===re.AND)return[]}return c},n=this._myIndex.records,s={},u=[];return n.forEach(({$:o,i:a})=>{if(S(o)){let l=i(r,o,a);l.length&&(s[a]||(s[a]={idx:a,item:o,matches:[]},u.push(s[a])),l.forEach(({matches:c})=>{s[a].matches.push(...c)}))}}),u}_searchObjectList(t){const r=ve(t,this.options),{keys:i,records:n}=this._myIndex,s=[];return n.forEach(({$:u,i:o})=>{if(!S(u))return;let a=[];i.forEach((l,c)=>{a.push(...this._findMatches({key:l,value:u[c],searcher:r}))}),a.length&&s.push({idx:o,item:u,matches:a})}),s}_findMatches({key:t,value:r,searcher:i}){if(!S(r))return[];let n=[];if(j(r))r.forEach(({v:s,i:u,n:o})=>{if(!S(s))return;const{isMatch:a,score:l,indices:c}=i.searchIn(s);a&&n.push({score:l,key:t,value:s,idx:u,norm:o,indices:c})});else{const{v:s,n:u}=r,{isMatch:o,score:a,indices:l}=i.searchIn(s);o&&n.push({score:a,key:t,value:s,norm:u,indices:l})}return n}}U.version="7.1.0";U.createIndex=dt;U.parseIndex=hr;U.config=y;U.parseQuery=mt;Fr(Dr);let ce;function Tr(){const e=ye.data.listings||[];return ce||(ce=new U(e,{keys:["title","type"],threshold:.4})),window.handleSearch=t=>{const r=t.target.value,i=r?ce.search(r).map(n=>n.item):e;_r(i)},`
    <div class="view-marketplace">
      <header>
        <h2>Marketplace</h2>
        <input type="text" 
               placeholder="Search items..." 
               oninput="handleSearch(event)"
               style="width: 100%; padding: 0.8rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 8px;">
      </header>
      <div id="listing-container" class="listing-grid">
        ${yt(e)}
      </div>
    </div>
  `}function _r(e){const t=document.getElementById("listing-container");t&&(t.innerHTML=yt(e))}function yt(e){return e.length?e.map(t=>`
    <div class="card listing-card">
      <div class="card-image-placeholder" style="height: 150px; background: #eee; border-radius: 8px; margin-bottom: 0.5rem;"></div>
      <h4>${t.title}</h4>
      <p class="price" style="color: #6c63ff; font-weight: bold;">${t.currency} ${t.price}</p>
      <span class="badge ${t.type.toLowerCase()}" style="font-size: 0.8rem; background: #eee; padding: 0.2rem 0.5rem; border-radius: 4px;">${t.type}</span>
    </div>
  `).join(""):"<p>No listings found.</p>"}function Pr(){const e=ye.data.services||[];window.handleRequest=r=>{alert(`Request sent for: ${r}
Verify your student ID in Profile to proceed.`)};const t=e.map(r=>`
    <div class="card service-card">
      <h4>${r.name}</h4>
      <p>${r.description}</p>
      <button class="btn btn--secondary" onclick="handleRequest('${r.name}')">Request</button>
    </div>
  `).join("");return`
    <div class="view-services">
      <header>
        <h2>Campus Services</h2>
      </header>
      <div class="service-list">
        ${t.length?t:"<p>No services available.</p>"}
      </div>
    </div>
  `}function Rr(){const e=JSON.parse(localStorage.getItem("cn_user"))||null;return e?`
      <div class="view-profile">
        <h2>Student Profile</h2>
        <div class="card">
          <h3>${e.name}</h3>
          <p>ID: ${e.id}</p>
          <p class="badge verified">Verified Student <span style="color:white">âœ”</span></p>
          <p>Trust Score: 100</p>
          <button class="btn" onclick="logout()">Logout</button>
        </div>
      </div>
    `:(window.handleLogin=t=>{t.preventDefault();const r=document.getElementById("student-id").value,i=document.getElementById("student-name").value,n=document.getElementById("login-error");if(!/^800\d{7}$/.test(r)){n.textContent="Invalid NMIMS ID. Must start with 800 followed by 7 digits.";return}const u={id:r,name:i,verified:!0};localStorage.setItem("cn_user",JSON.stringify(u)),window.router.navigate("/profile")},window.logout=()=>{localStorage.removeItem("cn_user"),window.router.navigate("/profile")},`
    <div class="view-profile">
      <h2>Student Verification</h2>
      <div class="card">
        <form onsubmit="handleLogin(event)">
          <div style="margin-bottom: 1rem;">
            <label style="display:block; margin-bottom:0.5rem">Name</label>
            <input type="text" id="student-name" required placeholder="John Doe" style="width:100%; padding:0.5rem">
          </div>
          <div style="margin-bottom: 1rem;">
            <label style="display:block; margin-bottom:0.5rem">NMIMS ID (800xxxxxxx)</label>
            <input type="text" id="student-id" required placeholder="8001234567" style="width:100%; padding:0.5rem">
          </div>
          <p id="login-error" style="color: red; font-size: 0.9rem;"></p>
          <button type="submit" class="btn btn--primary">Verify & Login</button>
        </form>
      </div>
    </div>
  `)}window.router=K;K.addRoute("/",Jt);K.addRoute("/marketplace",Tr);K.addRoute("/services",Pr);K.addRoute("/profile",Rr);async function $r(){await ye.init(),K.init(),window.addEventListener("route-changed",()=>{je.pageLoad(".card")}),je.pageLoad(".card"),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})})}$r();
