(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();const ne={data:{listings:[],users:[],services:[],forum:[]},async init(){await Promise.all([this.fetchData("listings"),this.fetchData("users"),this.fetchData("services"),this.fetchData("forum")]),console.log("Store initialized:",this.data)},async fetchData(e){try{const t=await fetch(`/data/${e}.json`);if(!t.ok)throw new Error(`Failed to fetch ${e}`);return this.data[e]=await t.json(),this.data[e]}catch(t){return console.error(t),[]}},getListing(e){return this.data.listings.find(t=>t.id===e)},getUser(e){return this.data.users.find(t=>t.id===e)}},G={};let Pe=null;const V={addRoute(e,t){G[e]=t},navigate(e){if(Pe===e)return;const t=G[e]||G["/404"]||(()=>"<h1>404 Not Found</h1>");Pe=e;const r=document.querySelector("#app");r.innerHTML=t(),window.history.pushState({},e,window.location.origin+e),window.dispatchEvent(new CustomEvent("route-changed",{detail:{path:e}}))},init(){window.onpopstate=()=>{const e=window.location.pathname;this.navigate(e)},this.resolve()},resolve(){const e=window.location.pathname,t=G[e]||G["/"]||(()=>"<h1>404</h1>");document.querySelector("#app").innerHTML=t()}};var Qe={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},be={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},Ct=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ee={CSS:{},springs:{}};function _(e,t,r){return Math.min(Math.max(e,t),r)}function Z(e,t){return e.indexOf(t)>-1}function ue(e,t){return e.apply(null,t)}var v={arr:function(e){return Array.isArray(e)},obj:function(e){return Z(Object.prototype.toString.call(e),"Object")},pth:function(e){return v.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||v.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return v.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return v.hex(e)||v.rgb(e)||v.hsl(e)},key:function(e){return!Qe.hasOwnProperty(e)&&!be.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Ye(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function Je(e,t){var r=Ye(e),i=_(v.und(r[0])?1:r[0],.1,100),n=_(v.und(r[1])?100:r[1],.1,100),s=_(v.und(r[2])?10:r[2],.1,100),o=_(v.und(r[3])?0:r[3],.1,100),u=Math.sqrt(n/i),a=s/(2*Math.sqrt(n*i)),l=a<1?u*Math.sqrt(1-a*a):0,c=1,f=a<1?(a*u+-o)/l:-o+u;function d(h){var g=t?t*h/1e3:h;return a<1?g=Math.exp(-g*a*u)*(c*Math.cos(l*g)+f*Math.sin(l*g)):g=(c+f*g)*Math.exp(-g*u),h===0||h===1?h:1-g}function A(){var h=ee.springs[e];if(h)return h;for(var g=1/6,b=0,C=0;;)if(b+=g,d(b)===1){if(C++,C>=16)break}else C=0;var p=b*g*1e3;return ee.springs[e]=p,p}return t?d:A}function wt(e){return e===void 0&&(e=10),function(t){return Math.ceil(_(t,1e-6,1)*e)*(1/e)}}var Mt=function(){var e=11,t=1/(e-1);function r(c,f){return 1-3*f+3*c}function i(c,f){return 3*f-6*c}function n(c){return 3*c}function s(c,f,d){return((r(f,d)*c+i(f,d))*c+n(f))*c}function o(c,f,d){return 3*r(f,d)*c*c+2*i(f,d)*c+n(f)}function u(c,f,d,A,h){var g,b,C=0;do b=f+(d-f)/2,g=s(b,A,h)-c,g>0?d=b:f=b;while(Math.abs(g)>1e-7&&++C<10);return b}function a(c,f,d,A){for(var h=0;h<4;++h){var g=o(f,d,A);if(g===0)return f;var b=s(f,d,A)-c;f-=b/g}return f}function l(c,f,d,A){if(!(0<=c&&c<=1&&0<=d&&d<=1))return;var h=new Float32Array(e);if(c!==f||d!==A)for(var g=0;g<e;++g)h[g]=s(g*t,c,d);function b(C){for(var p=0,m=1,w=e-1;m!==w&&h[m]<=C;++m)p+=t;--m;var O=(C-h[m])/(h[m+1]-h[m]),M=p+O*t,D=o(M,c,d);return D>=.001?a(C,M,c,d):D===0?M:u(C,p,p+t,c,d)}return function(C){return c===f&&d===A||C===0||C===1?C:s(b(C),f,A)}}return l}(),Ge=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Expo:function(){return function(i){return i?Math.pow(2,10*i-10):0}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=_(i,1,10),o=_(n,.1,2);return function(u){return u===0||u===1?u:-s*Math.pow(2,10*(u-1))*Math.sin((u-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,o){return function(u){return 1-n(s,o)(1-u)}},e["easeInOut"+i]=function(s,o){return function(u){return u<.5?n(s,o)(u*2)/2:1-n(s,o)(u*-2+2)/2}},e["easeOutIn"+i]=function(s,o){return function(u){return u<.5?(1-n(s,o)(1-u*2))/2:(n(s,o)(u*2-1)+1)/2}}}),e}();function Ce(e,t){if(v.fnc(e))return e;var r=e.split("(")[0],i=Ge[r],n=Ye(e);switch(r){case"spring":return Je(e,t);case"cubicBezier":return ue(Mt,n);case"steps":return ue(wt,n);default:return ue(i,n)}}function Ze(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function ie(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&n.push(o)}return n}function se(e){return e.reduce(function(t,r){return t.concat(v.arr(r)?se(r):r)},[])}function _e(e){return v.arr(e)?e:(v.str(e)&&(e=Ze(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function we(e,t){return e.some(function(r){return r===t})}function Me(e){var t={};for(var r in e)t[r]=e[r];return t}function fe(e,t){var r=Me(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function ae(e,t){var r=Me(e);for(var i in t)r[i]=v.und(e[i])?t[i]:e[i];return r}function Et(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function xt(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(u,a,l,c){return a+a+l+l+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+n+","+s+","+o+",1)"}function Dt(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function o(d,A,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?d+(A-d)*6*h:h<1/2?A:h<2/3?d+(A-d)*(2/3-h)*6:d}var u,a,l;if(i==0)u=a=l=n;else{var c=n<.5?n*(1+i):n+i-n*i,f=2*n-c;u=o(f,c,r+1/3),a=o(f,c,r),l=o(f,c,r-1/3)}return"rgba("+u*255+","+a*255+","+l*255+","+s+")"}function Ft(e){if(v.rgb(e))return Et(e);if(v.hex(e))return xt(e);if(v.hsl(e))return Dt(e)}function N(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Bt(e){if(Z(e,"translate")||e==="perspective")return"px";if(Z(e,"rotate")||Z(e,"skew"))return"deg"}function de(e,t){return v.fnc(e)?e(t.target,t.id,t.total):e}function R(e,t){return e.getAttribute(t)}function Ee(e,t,r){var i=N(t);if(we([r,"deg","rad","turn"],i))return t;var n=ee.CSS[t+r];if(!v.und(n))return n;var s=100,o=document.createElement(e.tagName),u=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;u.appendChild(o),o.style.position="absolute",o.style.width=s+r;var a=s/o.offsetWidth;u.removeChild(o);var l=a*parseFloat(t);return ee.CSS[t+r]=l,l}function qe(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?Ee(e,n,r):n}}function xe(e,t){if(v.dom(e)&&!v.inp(e)&&(!v.nil(R(e,t))||v.svg(e)&&e[t]))return"attribute";if(v.dom(e)&&we(Ct,t))return"transform";if(v.dom(e)&&t!=="transform"&&qe(e,t))return"css";if(e[t]!=null)return"object"}function Xe(e){if(v.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function It(e,t,r,i){var n=Z(t,"scale")?1:0+Bt(t),s=Xe(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?Ee(e,s,i):s}function De(e,t,r,i){switch(xe(e,t)){case"transform":return It(e,t,i,r);case"css":return qe(e,t,r);case"attribute":return R(e,t);default:return e[t]||0}}function Fe(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=N(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function et(e,t){if(v.col(e))return Ft(e);if(/\s/g.test(e))return e;var r=N(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function Be(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function St(e){return Math.PI*2*R(e,"r")}function Lt(e){return R(e,"width")*2+R(e,"height")*2}function kt(e){return Be({x:R(e,"x1"),y:R(e,"y1")},{x:R(e,"x2"),y:R(e,"y2")})}function tt(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=Be(i,s)),i=s}return r}function Tt(e){var t=e.points;return tt(e)+Be(t.getItem(t.numberOfItems-1),t.getItem(0))}function rt(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return St(e);case"rect":return Lt(e);case"line":return kt(e);case"polyline":return tt(e);case"polygon":return Tt(e)}}function Ot(e){var t=rt(e);return e.setAttribute("stroke-dasharray",t),t}function Pt(e){for(var t=e.parentNode;v.svg(t)&&v.svg(t.parentNode);)t=t.parentNode;return t}function nt(e,t){var r=t||{},i=r.el||Pt(e),n=i.getBoundingClientRect(),s=R(i,"viewBox"),o=n.width,u=n.height,a=r.viewBox||(s?s.split(" "):[0,0,o,u]);return{el:i,viewBox:a,x:a[0]/1,y:a[1]/1,w:o,h:u,vW:a[2],vH:a[3]}}function _t(e,t){var r=v.str(e)?Ze(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:nt(r),totalLength:rt(r)*(i/100)}}}function Rt(e,t,r){function i(c){c===void 0&&(c=0);var f=t+c>=1?t+c:0;return e.el.getPointAtLength(f)}var n=nt(e.el,e.svg),s=i(),o=i(-1),u=i(1),a=r?1:n.w/n.vW,l=r?1:n.h/n.vH;switch(e.property){case"x":return(s.x-n.x)*a;case"y":return(s.y-n.y)*l;case"angle":return Math.atan2(u.y-o.y,u.x-o.x)*180/Math.PI}}function Re(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=et(v.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:v.str(e)||t?i.split(r):[]}}function Ie(e){var t=e?se(v.arr(e)?e.map(_e):_e(e)):[];return ie(t,function(r,i,n){return n.indexOf(r)===i})}function it(e){var t=Ie(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:Xe(r)}}})}function $t(e,t){var r=Me(t);if(/^spring/.test(r.easing)&&(r.duration=Je(r.easing)),v.arr(e)){var i=e.length,n=i===2&&!v.obj(e[0]);n?e={value:e}:v.fnc(t.duration)||(r.duration=t.duration/i)}var s=v.arr(e)?e:[e];return s.map(function(o,u){var a=v.obj(o)&&!v.pth(o)?o:{value:o};return v.und(a.delay)&&(a.delay=u?0:t.delay),v.und(a.endDelay)&&(a.endDelay=u===s.length-1?t.endDelay:0),a}).map(function(o){return ae(o,r)})}function Nt(e){for(var t=ie(se(e.map(function(s){return Object.keys(s)})),function(s){return v.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),r={},i=function(s){var o=t[s];r[o]=e.map(function(u){var a={};for(var l in u)v.key(l)?l==o&&(a.value=u[l]):a[l]=u[l];return a})},n=0;n<t.length;n++)i(n);return r}function jt(e,t){var r=[],i=t.keyframes;i&&(t=ae(Nt(i),t));for(var n in t)v.key(n)&&r.push({name:n,tweens:$t(t[n],e)});return r}function zt(e,t){var r={};for(var i in e){var n=de(e[i],t);v.arr(n)&&(n=n.map(function(s){return de(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function Vt(e,t){var r;return e.tweens.map(function(i){var n=zt(i,t),s=n.value,o=v.arr(s)?s[1]:s,u=N(o),a=De(t.target,e.name,u,t),l=r?r.to.original:a,c=v.arr(s)?s[0]:l,f=N(c)||N(a),d=u||f;return v.und(o)&&(o=l),n.from=Re(c,d),n.to=Re(Fe(o,c),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=Ce(n.easing,n.duration),n.isPath=v.pth(s),n.isPathTargetInsideSVG=n.isPath&&v.svg(t.target),n.isColor=v.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var st={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(o,u){s+=u+"("+o+") "}),e.style.transform=s}}};function at(e,t){var r=it(e);r.forEach(function(i){for(var n in t){var s=de(t[n],i),o=i.target,u=N(s),a=De(o,n,u,i),l=u||N(a),c=Fe(et(s,l),a),f=xe(o,n);st[f](o,n,c,i.transforms,!0)}})}function Wt(e,t){var r=xe(e.target,t.name);if(r){var i=Vt(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function Ht(e,t){return ie(se(e.map(function(r){return t.map(function(i){return Wt(r,i)})})),function(r){return!v.und(r)})}function ot(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){return i(s)+s.duration})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){return i(s)+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){return i(s)+s.duration-s.endDelay})):t.endDelay,n}var $e=0;function Kt(e){var t=fe(Qe,e),r=fe(be,e),i=jt(r,e),n=it(e.targets),s=Ht(n,i),o=ot(s,r),u=$e;return $e++,ae(t,{id:u,children:[],animatables:n,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var T=[],ut=function(){var e;function t(){!e&&(!Ne()||!E.suspendWhenDocumentHidden)&&T.length>0&&(e=requestAnimationFrame(r))}function r(n){for(var s=T.length,o=0;o<s;){var u=T[o];u.paused?(T.splice(o,1),s--):(u.tick(n),o++)}e=o>0?requestAnimationFrame(r):void 0}function i(){E.suspendWhenDocumentHidden&&(Ne()?e=cancelAnimationFrame(e):(T.forEach(function(n){return n._onDocumentVisibility()}),ut()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),t}();function Ne(){return!!document&&document.hidden}function E(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s=0,o=null;function u(p){var m=window.Promise&&new Promise(function(w){return o=w});return p.finished=m,m}var a=Kt(e);u(a);function l(){var p=a.direction;p!=="alternate"&&(a.direction=p!=="normal"?"normal":"reverse"),a.reversed=!a.reversed,n.forEach(function(m){return m.reversed=a.reversed})}function c(p){return a.reversed?a.duration-p:p}function f(){t=0,r=c(a.currentTime)*(1/E.speed)}function d(p,m){m&&m.seek(p-m.timelineOffset)}function A(p){if(a.reversePlayback)for(var w=s;w--;)d(p,n[w]);else for(var m=0;m<s;m++)d(p,n[m])}function h(p){for(var m=0,w=a.animations,O=w.length;m<O;){var M=w[m],D=M.animatable,I=M.tweens,F=I.length-1,x=I[F];F&&(x=ie(I,function(bt){return p<bt.end})[0]||x);for(var P=_(p-x.start-x.delay,0,x.duration)/x.duration,k=isNaN(P)?1:x.easing(P),L=x.to.strings,B=x.round,z=[],q=x.to.numbers.length,K=void 0,Q=0;Q<q;Q++){var Y=void 0,Le=x.to.numbers[Q],ke=x.from.numbers[Q]||0;x.isPath?Y=Rt(x.value,k*Le,x.isPathTargetInsideSVG):Y=ke+k*(Le-ke),B&&(x.isColor&&Q>2||(Y=Math.round(Y*B)/B)),z.push(Y)}var Te=L.length;if(!Te)K=z[0];else{K=L[0];for(var J=0;J<Te;J++){L[J];var Oe=L[J+1],oe=z[J];isNaN(oe)||(Oe?K+=oe+Oe:K+=oe+" ")}}st[M.type](D.target,M.property,K,D.transforms),M.currentValue=K,m++}}function g(p){a[p]&&!a.passThrough&&a[p](a)}function b(){a.remaining&&a.remaining!==!0&&a.remaining--}function C(p){var m=a.duration,w=a.delay,O=m-a.endDelay,M=c(p);a.progress=_(M/m*100,0,100),a.reversePlayback=M<a.currentTime,n&&A(M),!a.began&&a.currentTime>0&&(a.began=!0,g("begin")),!a.loopBegan&&a.currentTime>0&&(a.loopBegan=!0,g("loopBegin")),M<=w&&a.currentTime!==0&&h(0),(M>=O&&a.currentTime!==m||!m)&&h(m),M>w&&M<O?(a.changeBegan||(a.changeBegan=!0,a.changeCompleted=!1,g("changeBegin")),g("change"),h(M)):a.changeBegan&&(a.changeCompleted=!0,a.changeBegan=!1,g("changeComplete")),a.currentTime=_(M,0,m),a.began&&g("update"),p>=m&&(r=0,b(),a.remaining?(t=i,g("loopComplete"),a.loopBegan=!1,a.direction==="alternate"&&l()):(a.paused=!0,a.completed||(a.completed=!0,g("loopComplete"),g("complete"),!a.passThrough&&"Promise"in window&&(o(),u(a)))))}return a.reset=function(){var p=a.direction;a.passThrough=!1,a.currentTime=0,a.progress=0,a.paused=!0,a.began=!1,a.loopBegan=!1,a.changeBegan=!1,a.completed=!1,a.changeCompleted=!1,a.reversePlayback=!1,a.reversed=p==="reverse",a.remaining=a.loop,n=a.children,s=n.length;for(var m=s;m--;)a.children[m].reset();(a.reversed&&a.loop!==!0||p==="alternate"&&a.loop===1)&&a.remaining++,h(a.reversed?a.duration:0)},a._onDocumentVisibility=f,a.set=function(p,m){return at(p,m),a},a.tick=function(p){i=p,t||(t=i),C((i+(r-t))*E.speed)},a.seek=function(p){C(c(p))},a.pause=function(){a.paused=!0,f()},a.play=function(){a.paused&&(a.completed&&a.reset(),a.paused=!1,T.push(a),f(),ut())},a.reverse=function(){l(),a.completed=!a.reversed,f()},a.restart=function(){a.reset(),a.play()},a.remove=function(p){var m=Ie(p);ct(m,a)},a.reset(),a.autoplay&&a.play(),a}function je(e,t){for(var r=t.length;r--;)we(e,t[r].animatable.target)&&t.splice(r,1)}function ct(e,t){var r=t.animations,i=t.children;je(e,r);for(var n=i.length;n--;){var s=i[n],o=s.animations;je(e,o),!o.length&&!s.children.length&&i.splice(n,1)}!r.length&&!i.length&&t.pause()}function Ut(e){for(var t=Ie(e),r=T.length;r--;){var i=T[r];ct(t,i)}}function Qt(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?Ce(t.easing):null,n=t.grid,s=t.axis,o=t.from||0,u=o==="first",a=o==="center",l=o==="last",c=v.arr(e),f=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,A=N(c?e[1]:e)||0,h=t.start||0+(c?f:0),g=[],b=0;return function(C,p,m){if(u&&(o=0),a&&(o=(m-1)/2),l&&(o=m-1),!g.length){for(var w=0;w<m;w++){if(!n)g.push(Math.abs(o-w));else{var O=a?(n[0]-1)/2:o%n[0],M=a?(n[1]-1)/2:Math.floor(o/n[0]),D=w%n[0],I=Math.floor(w/n[0]),F=O-D,x=M-I,P=Math.sqrt(F*F+x*x);s==="x"&&(P=-F),s==="y"&&(P=-x),g.push(P)}b=Math.max.apply(Math,g)}i&&(g=g.map(function(L){return i(L/b)*b})),r==="reverse"&&(g=g.map(function(L){return s?L<0?L*-1:-L:Math.abs(b-L)}))}var k=c?(d-f)/b:f;return h+k*(Math.round(g[p]*100)/100)+A}}function Yt(e){e===void 0&&(e={});var t=E(e);return t.duration=0,t.add=function(r,i){var n=T.indexOf(t),s=t.children;n>-1&&T.splice(n,1);function o(d){d.passThrough=!0}for(var u=0;u<s.length;u++)o(s[u]);var a=ae(r,fe(be,e));a.targets=a.targets||e.targets;var l=t.duration;a.autoplay=!1,a.direction=t.direction,a.timelineOffset=v.und(i)?l:Fe(i,l),o(t),t.seek(a.timelineOffset);var c=E(a);o(c),s.push(c);var f=ot(s,e);return t.delay=f.delay,t.endDelay=f.endDelay,t.duration=f.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}E.version="3.2.1";E.speed=1;E.suspendWhenDocumentHidden=!0;E.running=T;E.remove=Ut;E.get=De;E.set=at;E.convertPx=Ee;E.path=_t;E.setDashoffset=Ot;E.stagger=Qt;E.timeline=Yt;E.easing=Ce;E.penner=Ge;E.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const he={pageLoad(e){E({targets:e,translateY:[20,0],opacity:[0,1],easing:"spring(1, 80, 10, 0)",duration:800,delay:E.stagger(100)})},enter(e,t){E({targets:e,opacity:[0,1],duration:300,easing:"easeOutQuad",complete:t})}};function Jt(){return`
    <div class="view-home">
      <header class="hero">
        <h1>Welcome to Campus Nodes</h1>
        <p>The hyper-local student trading ecosystem.</p>
      </header>
      
      <div class="grid">
        <div class="card" onclick="window.router.navigate('/marketplace')">
          <h3>Marketplace</h3>
          <p>Buy, sell, and rent notes & gear.</p>
        </div>
        <div class="card" onclick="window.router.navigate('/services')">
          <h3>Services</h3>
          <p>Find project help or swap lockers.</p>
        </div>
      </div>
    </div>
  `}function j(e){return Array.isArray?Array.isArray(e):dt(e)==="[object Array]"}function Gt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Zt(e){return e==null?"":Gt(e)}function $(e){return typeof e=="string"}function lt(e){return typeof e=="number"}function qt(e){return e===!0||e===!1||Xt(e)&&dt(e)=="[object Boolean]"}function ft(e){return typeof e=="object"}function Xt(e){return ft(e)&&e!==null}function S(e){return e!=null}function ce(e){return!e.trim().length}function dt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const er="Incorrect 'index' type",tr=e=>`Invalid value for key ${e}`,rr=e=>`Pattern length exceeds max of ${e}.`,nr=e=>`Missing ${e} property in key`,ir=e=>`Property 'weight' in key '${e}' must be a positive integer`,ze=Object.prototype.hasOwnProperty;class sr{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(i=>{let n=ht(i);this._keys.push(n),this._keyMap[n.id]=n,r+=n.weight}),this._keys.forEach(i=>{i.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ht(e){let t=null,r=null,i=null,n=1,s=null;if($(e)||j(e))i=e,t=Ve(e),r=ge(e);else{if(!ze.call(e,"name"))throw new Error(nr("name"));const o=e.name;if(i=o,ze.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(ir(o));t=Ve(o),r=ge(o),s=e.getFn}return{path:t,id:r,weight:n,src:i,getFn:s}}function Ve(e){return j(e)?e:e.split(".")}function ge(e){return j(e)?e.join("."):e}function ar(e,t){let r=[],i=!1;const n=(s,o,u)=>{if(S(s))if(!o[u])r.push(s);else{let a=o[u];const l=s[a];if(!S(l))return;if(u===o.length-1&&($(l)||lt(l)||qt(l)))r.push(Zt(l));else if(j(l)){i=!0;for(let c=0,f=l.length;c<f;c+=1)n(l[c],o,u+1)}else o.length&&n(l,o,u+1)}};return n(e,$(t)?t.split("."):t,0),i?r:r[0]}const or={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ur={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},cr={location:0,threshold:.6,distance:100},lr={useExtendedSearch:!1,getFn:ar,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var y={...ur,...or,...cr,...lr};const fr=/[^ ]+/g;function dr(e=1,t=3){const r=new Map,i=Math.pow(10,t);return{get(n){const s=n.match(fr).length;if(r.has(s))return r.get(s);const o=1/Math.pow(s,.5*e),u=parseFloat(Math.round(o*i)/i);return r.set(s,u),u},clear(){r.clear()}}}class Se{constructor({getFn:t=y.getFn,fieldNormWeight:r=y.fieldNormWeight}={}){this.norm=dr(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,i)=>{this._keysMap[r.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,$(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();$(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,i=this.size();r<i;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!S(t)||ce(t))return;let i={v:t,i:r,n:this.norm.get(t)};this.records.push(i)}_addObject(t,r){let i={i:r,$:{}};this.keys.forEach((n,s)=>{let o=n.getFn?n.getFn(t):this.getFn(t,n.path);if(S(o)){if(j(o)){let u=[];const a=[{nestedArrIndex:-1,value:o}];for(;a.length;){const{nestedArrIndex:l,value:c}=a.pop();if(S(c))if($(c)&&!ce(c)){let f={v:c,i:l,n:this.norm.get(c)};u.push(f)}else j(c)&&c.forEach((f,d)=>{a.push({nestedArrIndex:d,value:f})})}i.$[s]=u}else if($(o)&&!ce(o)){let u={v:o,n:this.norm.get(o)};i.$[s]=u}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function gt(e,t,{getFn:r=y.getFn,fieldNormWeight:i=y.fieldNormWeight}={}){const n=new Se({getFn:r,fieldNormWeight:i});return n.setKeys(e.map(ht)),n.setSources(t),n.create(),n}function hr(e,{getFn:t=y.getFn,fieldNormWeight:r=y.fieldNormWeight}={}){const{keys:i,records:n}=e,s=new Se({getFn:t,fieldNormWeight:r});return s.setKeys(i),s.setIndexRecords(n),s}function X(e,{errors:t=0,currentLocation:r=0,expectedLocation:i=0,distance:n=y.distance,ignoreLocation:s=y.ignoreLocation}={}){const o=t/e.length;if(s)return o;const u=Math.abs(i-r);return n?o+u/n:u?1:o}function gr(e=[],t=y.minMatchCharLength){let r=[],i=-1,n=-1,s=0;for(let o=e.length;s<o;s+=1){let u=e[s];u&&i===-1?i=s:!u&&i!==-1&&(n=s-1,n-i+1>=t&&r.push([i,n]),i=-1)}return e[s-1]&&s-i>=t&&r.push([i,s-1]),r}const H=32;function vr(e,t,r,{location:i=y.location,distance:n=y.distance,threshold:s=y.threshold,findAllMatches:o=y.findAllMatches,minMatchCharLength:u=y.minMatchCharLength,includeMatches:a=y.includeMatches,ignoreLocation:l=y.ignoreLocation}={}){if(t.length>H)throw new Error(rr(H));const c=t.length,f=e.length,d=Math.max(0,Math.min(i,f));let A=s,h=d;const g=u>1||a,b=g?Array(f):[];let C;for(;(C=e.indexOf(t,h))>-1;){let D=X(t,{currentLocation:C,expectedLocation:d,distance:n,ignoreLocation:l});if(A=Math.min(D,A),h=C+c,g){let I=0;for(;I<c;)b[C+I]=1,I+=1}}h=-1;let p=[],m=1,w=c+f;const O=1<<c-1;for(let D=0;D<c;D+=1){let I=0,F=w;for(;I<F;)X(t,{errors:D,currentLocation:d+F,expectedLocation:d,distance:n,ignoreLocation:l})<=A?I=F:w=F,F=Math.floor((w-I)/2+I);w=F;let x=Math.max(1,d-F+1),P=o?f:Math.min(d+F,f)+c,k=Array(P+2);k[P+1]=(1<<D)-1;for(let B=P;B>=x;B-=1){let z=B-1,q=r[e.charAt(z)];if(g&&(b[z]=+!!q),k[B]=(k[B+1]<<1|1)&q,D&&(k[B]|=(p[B+1]|p[B])<<1|1|p[B+1]),k[B]&O&&(m=X(t,{errors:D,currentLocation:z,expectedLocation:d,distance:n,ignoreLocation:l}),m<=A)){if(A=m,h=z,h<=d)break;x=Math.max(1,2*d-h)}}if(X(t,{errors:D+1,currentLocation:d,expectedLocation:d,distance:n,ignoreLocation:l})>A)break;p=k}const M={isMatch:h>=0,score:Math.max(.001,m)};if(g){const D=gr(b,u);D.length?a&&(M.indices=D):M.isMatch=!1}return M}function pr(e){let t={};for(let r=0,i=e.length;r<i;r+=1){const n=e.charAt(r);t[n]=(t[n]||0)|1<<i-r-1}return t}const te=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class vt{constructor(t,{location:r=y.location,threshold:i=y.threshold,distance:n=y.distance,includeMatches:s=y.includeMatches,findAllMatches:o=y.findAllMatches,minMatchCharLength:u=y.minMatchCharLength,isCaseSensitive:a=y.isCaseSensitive,ignoreDiacritics:l=y.ignoreDiacritics,ignoreLocation:c=y.ignoreLocation}={}){if(this.options={location:r,threshold:i,distance:n,includeMatches:s,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreDiacritics:l,ignoreLocation:c},t=a?t:t.toLowerCase(),t=l?te(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(A,h)=>{this.chunks.push({pattern:A,alphabet:pr(A),startIndex:h})},d=this.pattern.length;if(d>H){let A=0;const h=d%H,g=d-h;for(;A<g;)f(this.pattern.substr(A,H),A),A+=H;if(h){const b=d-H;f(this.pattern.substr(b),b)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,ignoreDiacritics:i,includeMatches:n}=this.options;if(t=r?t:t.toLowerCase(),t=i?te(t):t,this.pattern===t){let g={isMatch:!0,score:0};return n&&(g.indices=[[0,t.length-1]]),g}const{location:s,distance:o,threshold:u,findAllMatches:a,minMatchCharLength:l,ignoreLocation:c}=this.options;let f=[],d=0,A=!1;this.chunks.forEach(({pattern:g,alphabet:b,startIndex:C})=>{const{isMatch:p,score:m,indices:w}=vr(t,g,b,{location:s+C,distance:o,threshold:u,findAllMatches:a,minMatchCharLength:l,includeMatches:n,ignoreLocation:c});p&&(A=!0),d+=m,p&&w&&(f=[...f,...w])});let h={isMatch:A,score:A?d/this.chunks.length:1};return A&&n&&(h.indices=f),h}}class W{constructor(t){this.pattern=t}static isMultiMatch(t){return We(t,this.multiRegex)}static isSingleMatch(t){return We(t,this.singleRegex)}search(){}}function We(e,t){const r=e.match(t);return r?r[1]:null}class mr extends W{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class yr extends W{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const i=t.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,t.length-1]}}}class Ar extends W{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class br extends W{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Cr extends W{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class wr extends W{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class pt extends W{constructor(t,{location:r=y.location,threshold:i=y.threshold,distance:n=y.distance,includeMatches:s=y.includeMatches,findAllMatches:o=y.findAllMatches,minMatchCharLength:u=y.minMatchCharLength,isCaseSensitive:a=y.isCaseSensitive,ignoreDiacritics:l=y.ignoreDiacritics,ignoreLocation:c=y.ignoreLocation}={}){super(t),this._bitapSearch=new vt(t,{location:r,threshold:i,distance:n,includeMatches:s,findAllMatches:o,minMatchCharLength:u,isCaseSensitive:a,ignoreDiacritics:l,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class mt extends W{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,i;const n=[],s=this.pattern.length;for(;(i=t.indexOf(this.pattern,r))>-1;)r=i+s,n.push([i,r-1]);const o=!!n.length;return{isMatch:o,score:o?0:1,indices:n}}}const ve=[mr,mt,Ar,br,wr,Cr,yr,pt],He=ve.length,Mr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Er="|";function xr(e,t={}){return e.split(Er).map(r=>{let i=r.trim().split(Mr).filter(s=>s&&!!s.trim()),n=[];for(let s=0,o=i.length;s<o;s+=1){const u=i[s];let a=!1,l=-1;for(;!a&&++l<He;){const c=ve[l];let f=c.isMultiMatch(u);f&&(n.push(new c(f,t)),a=!0)}if(!a)for(l=-1;++l<He;){const c=ve[l];let f=c.isSingleMatch(u);if(f){n.push(new c(f,t));break}}}return n})}const Dr=new Set([pt.type,mt.type]);class Fr{constructor(t,{isCaseSensitive:r=y.isCaseSensitive,ignoreDiacritics:i=y.ignoreDiacritics,includeMatches:n=y.includeMatches,minMatchCharLength:s=y.minMatchCharLength,ignoreLocation:o=y.ignoreLocation,findAllMatches:u=y.findAllMatches,location:a=y.location,threshold:l=y.threshold,distance:c=y.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:i,includeMatches:n,minMatchCharLength:s,findAllMatches:u,ignoreLocation:o,location:a,threshold:l,distance:c},t=r?t:t.toLowerCase(),t=i?te(t):t,this.pattern=t,this.query=xr(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:n,ignoreDiacritics:s}=this.options;t=n?t:t.toLowerCase(),t=s?te(t):t;let o=0,u=[],a=0;for(let l=0,c=r.length;l<c;l+=1){const f=r[l];u.length=0,o=0;for(let d=0,A=f.length;d<A;d+=1){const h=f[d],{isMatch:g,indices:b,score:C}=h.search(t);if(g){if(o+=1,a+=C,i){const p=h.constructor.type;Dr.has(p)?u=[...u,...b]:u.push(b)}}else{a=0,o=0,u.length=0;break}}if(o){let d={isMatch:!0,score:a/o};return i&&(d.indices=u),d}}return{isMatch:!1,score:1}}}const pe=[];function Br(...e){pe.push(...e)}function me(e,t){for(let r=0,i=pe.length;r<i;r+=1){let n=pe[r];if(n.condition(e,t))return new n(e,t)}return new vt(e,t)}const re={AND:"$and",OR:"$or"},ye={PATH:"$path",PATTERN:"$val"},Ae=e=>!!(e[re.AND]||e[re.OR]),Ir=e=>!!e[ye.PATH],Sr=e=>!j(e)&&ft(e)&&!Ae(e),Ke=e=>({[re.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function yt(e,t,{auto:r=!0}={}){const i=n=>{let s=Object.keys(n);const o=Ir(n);if(!o&&s.length>1&&!Ae(n))return i(Ke(n));if(Sr(n)){const a=o?n[ye.PATH]:s[0],l=o?n[ye.PATTERN]:n[a];if(!$(l))throw new Error(tr(a));const c={keyId:ge(a),pattern:l};return r&&(c.searcher=me(l,t)),c}let u={children:[],operator:s[0]};return s.forEach(a=>{const l=n[a];j(l)&&l.forEach(c=>{u.children.push(i(c))})}),u};return Ae(e)||(e=Ke(e)),i(e)}function Lr(e,{ignoreFieldNorm:t=y.ignoreFieldNorm}){e.forEach(r=>{let i=1;r.matches.forEach(({key:n,norm:s,score:o})=>{const u=n?n.weight:null;i*=Math.pow(o===0&&u?Number.EPSILON:o,(u||1)*(t?1:s))}),r.score=i})}function kr(e,t){const r=e.matches;t.matches=[],S(r)&&r.forEach(i=>{if(!S(i.indices)||!i.indices.length)return;const{indices:n,value:s}=i;let o={indices:n,value:s};i.key&&(o.key=i.key.src),i.idx>-1&&(o.refIndex=i.idx),t.matches.push(o)})}function Tr(e,t){t.score=e.score}function Or(e,t,{includeMatches:r=y.includeMatches,includeScore:i=y.includeScore}={}){const n=[];return r&&n.push(kr),i&&n.push(Tr),e.map(s=>{const{idx:o}=s,u={item:t[o],refIndex:o};return n.length&&n.forEach(a=>{a(s,u)}),u})}class U{constructor(t,r={},i){this.options={...y,...r},this.options.useExtendedSearch,this._keyStore=new sr(this.options.keys),this.setCollection(t,i)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof Se))throw new Error(er);this._myIndex=r||gt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){S(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let i=0,n=this._docs.length;i<n;i+=1){const s=this._docs[i];t(s,i)&&(this.removeAt(i),i-=1,n-=1,r.push(s))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:i,includeScore:n,shouldSort:s,sortFn:o,ignoreFieldNorm:u}=this.options;let a=$(t)?$(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Lr(a,{ignoreFieldNorm:u}),s&&a.sort(o),lt(r)&&r>-1&&(a=a.slice(0,r)),Or(a,this._docs,{includeMatches:i,includeScore:n})}_searchStringList(t){const r=me(t,this.options),{records:i}=this._myIndex,n=[];return i.forEach(({v:s,i:o,n:u})=>{if(!S(s))return;const{isMatch:a,score:l,indices:c}=r.searchIn(s);a&&n.push({item:s,idx:o,matches:[{score:l,value:s,norm:u,indices:c}]})}),n}_searchLogical(t){const r=yt(t,this.options),i=(u,a,l)=>{if(!u.children){const{keyId:f,searcher:d}=u,A=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:d});return A&&A.length?[{idx:l,item:a,matches:A}]:[]}const c=[];for(let f=0,d=u.children.length;f<d;f+=1){const A=u.children[f],h=i(A,a,l);if(h.length)c.push(...h);else if(u.operator===re.AND)return[]}return c},n=this._myIndex.records,s={},o=[];return n.forEach(({$:u,i:a})=>{if(S(u)){let l=i(r,u,a);l.length&&(s[a]||(s[a]={idx:a,item:u,matches:[]},o.push(s[a])),l.forEach(({matches:c})=>{s[a].matches.push(...c)}))}}),o}_searchObjectList(t){const r=me(t,this.options),{keys:i,records:n}=this._myIndex,s=[];return n.forEach(({$:o,i:u})=>{if(!S(o))return;let a=[];i.forEach((l,c)=>{a.push(...this._findMatches({key:l,value:o[c],searcher:r}))}),a.length&&s.push({idx:u,item:o,matches:a})}),s}_findMatches({key:t,value:r,searcher:i}){if(!S(r))return[];let n=[];if(j(r))r.forEach(({v:s,i:o,n:u})=>{if(!S(s))return;const{isMatch:a,score:l,indices:c}=i.searchIn(s);a&&n.push({score:l,key:t,value:s,idx:o,norm:u,indices:c})});else{const{v:s,n:o}=r,{isMatch:u,score:a,indices:l}=i.searchIn(s);u&&n.push({score:a,key:t,value:s,norm:o,indices:l})}return n}}U.version="7.1.0";U.createIndex=gt;U.parseIndex=hr;U.config=y;U.parseQuery=yt;Br(Fr);let le;function Pr(){const e=ne.data.listings||[];return le||(le=new U(e,{keys:["title","type"],threshold:.4})),window.handleSearch=t=>{const r=t.target.value,i=r?le.search(r).map(n=>n.item):e;Ue(i)},window.filterCategory=t=>{const r=t==="All"?e:e.filter(i=>i.type===t);Ue(r)},`
    <div class="view-marketplace">
      <header>
        <h2>Marketplace</h2>
        <input type="text" 
               placeholder="Search items..." 
               oninput="handleSearch(event)"
               style="width: 100%; margin-bottom: 1rem;">
               
        <div class="categories" style="display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:1.5rem">
          <button class="badge" onclick="filterCategory('All')" style="cursor:pointer; background:white; color:#121212">All</button>
          <button class="badge note" onclick="filterCategory('Notes')" style="cursor:pointer">Notes</button>
          <button class="badge tech" onclick="filterCategory('Tech')" style="cursor:pointer">Tech</button>
          <button class="badge stationary" onclick="filterCategory('Stationary')" style="cursor:pointer">Stationary</button>
        </div>
      </header>
      <div id="listing-container" class="listing-grid">
        ${At(e)}
      </div>
    </div>
  `}function Ue(e){const t=document.getElementById("listing-container");t&&(t.innerHTML=At(e),he.pageLoad(".listing-card"))}function At(e){return e.length?e.map(t=>`
    <div class="card listing-card">
      <div class="card-image-placeholder" style="height: 150px; background: #333; border-radius: 8px; margin-bottom: 0.8rem;"></div>
      <h4 style="margin-bottom:0.5rem">${t.title}</h4>
      <div style="display:flex; justify-content:space-between; align-items:center">
         <p class="price" style="color: #FF6B00; font-weight: bold; margin:0">${t.currency} ${t.price}</p>
         <span class="badge ${t.type.toLowerCase()}" style="font-size: 0.7rem;">${t.type}</span>
      </div>
      <p style="font-size:0.8rem; color:#aaa; margin-top:0.5rem">Condition: ${t.condition}</p>
    </div>
  `).join(""):"<p>No listings found.</p>"}function _r(){const e=ne.data.services||[];window.handleRequest=r=>{alert(`Request sent for: ${r}
Verify your student ID in Profile to proceed.`)};const t=e.map(r=>`
    <div class="card service-card">
      <h4>${r.name}</h4>
      <p>${r.description}</p>
      <button class="btn btn--secondary" onclick="handleRequest('${r.name}')">Request</button>
    </div>
  `).join("");return`
    <div class="view-services">
      <header>
        <h2>Campus Services</h2>
      </header>
      <div class="service-list">
        ${t.length?t:"<p>No services available.</p>"}
      </div>
    </div>
  `}function Rr(){const e=JSON.parse(localStorage.getItem("cn_user"))||null;return e?`
      <div class="view-profile">
        <h2>Student Profile</h2>
        <div class="card">
          <h3>${e.name}</h3>
          <p>ID: ${e.id}</p>
          <p class="badge verified">Verified Student <span style="color:white">âœ”</span></p>
          <p>Trust Score: 100</p>
          <button class="btn" onclick="logout()">Logout</button>
        </div>
      </div>
    `:(window.handleLogin=t=>{t.preventDefault();const r=document.getElementById("student-id").value,i=document.getElementById("student-name").value,n=document.getElementById("login-error");if(!/^800\d{7}$/.test(r)){n.textContent="Invalid NMIMS ID. Must start with 800 followed by 7 digits.";return}const o={id:r,name:i,verified:!0};localStorage.setItem("cn_user",JSON.stringify(o)),window.router.navigate("/profile")},window.logout=()=>{localStorage.removeItem("cn_user"),window.router.navigate("/profile")},`
    <div class="view-profile">
      <h2>Student Verification</h2>
      <div class="card">
        <form onsubmit="handleLogin(event)">
          <div style="margin-bottom: 1rem;">
            <label style="display:block; margin-bottom:0.5rem">Name</label>
            <input type="text" id="student-name" required placeholder="John Doe" style="width:100%; padding:0.5rem">
          </div>
          <div style="margin-bottom: 1rem;">
            <label style="display:block; margin-bottom:0.5rem">NMIMS ID (800xxxxxxx)</label>
            <input type="text" id="student-id" required placeholder="8001234567" style="width:100%; padding:0.5rem">
          </div>
          <p id="login-error" style="color: red; font-size: 0.9rem;"></p>
          <button type="submit" class="btn btn--primary">Verify & Login</button>
        </form>
      </div>
    </div>
  `)}function $r(){return`
    <div class="view-forum">
      <header style="margin-bottom: 2rem;">
        <h2>Community Forum</h2>
        <p style="color:#aaa">Discuss trades, events, and campus news.</p>
        <button class="btn btn--primary" style="margin-top:1rem; width:100%">+ New Discussion</button>
      </header>
      <div class="forum-list">
        ${(ne.data.forum||[]).map(r=>`
    <div class="card thread-card" style="margin-bottom: 1rem;">
      <div style="display:flex; justify-content:space-between; margin-bottom:0.5rem">
        <span class="badge" style="background:#333; color:#aaa">${r.tags.join(", ")}</span>
        <span style="font-size:0.8rem; color:#666">${r.timestamp}</span>
      </div>
      <h3 style="margin: 0.5rem 0; color:white">${r.title}</h3>
      <p style="color:#aaa; font-size:0.9rem">Posted by <span style="color: #FF6B00">${r.author}</span></p>
      <div style="margin-top:1rem; padding-top:0.5rem; border-top:1px solid rgba(255,255,255,0.1); font-size:0.8rem">
        ðŸ’¬ ${r.replies} Replies
      </div>
    </div>
  `).join("")}
      </div>
    </div>
  `}function Nr(){return`
    <div class="view-connections">
      <header>
        <h2>My Connections</h2>
        <p style="color:#aaa">Network with committees and verified students.</p>
      </header>
      
      <div class="grid">
        <div class="card">
          <h3>Committees</h3>
          <ul style="list-style:none; padding:0; margin-top:1rem">
            <li style="padding:0.5rem 0; border-bottom:1px solid #333">
              <strong style="color:white">Cultural Committee</strong>
              <div style="font-size:0.8rem; color:#aaa">3 Connections</div>
            </li>
            <li style="padding:0.5rem 0; border-bottom:1px solid #333">
              <strong style="color:white">Technical Team</strong>
              <div style="font-size:0.8rem; color:#aaa">Recruiting!</div>
            </li>
          </ul>
        </div>

        <div class="card">
          <h3>Trust Network</h3>
          <div style="text-align:center; padding:1rem 0">
            <div style="font-size:3rem; font-weight:700; color:#00e676">98</div>
            <div style="color:#aaa; font-size:0.9rem">Your Trust Score</div>
            <p style="margin-top:1rem; font-size:0.8rem">Based on completed trades availability.</p>
          </div>
        </div>
      </div>
    </div>
  `}window.router=V;V.addRoute("/",Jt);V.addRoute("/marketplace",Pr);V.addRoute("/services",_r);V.addRoute("/profile",Rr);V.addRoute("/forum",$r);V.addRoute("/connections",Nr);async function jr(){await ne.init(),V.init(),window.addEventListener("route-changed",()=>{he.pageLoad(".card")}),he.pageLoad(".card"),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})})}jr();
